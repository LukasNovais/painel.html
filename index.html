async function atualizarDados() {
        try {
            // Ajustado para o endereço e método que vimos na sua imagem
            const response = await fetch('https://srv.sigasat.com.br/dev/rast/index/grid.positions', {
                method: 'POST', // Mudamos para POST
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                // O servidor espera alguns parâmetros, enviamos vazio para pegar todos
                body: 'page=1&rows=100' 
            });
            
            const dados = await response.json();
            console.log("Dados recebidos:", dados); // Isso ajuda a ver se funcionou no F12

            const listaHtml = document.getElementById('lista');
            listaHtml.innerHTML = ''; 

            // A Sigasat organiza os dados em 'rows'
            dados.rows.forEach(veiculo => {
                // Usando os nomes exatos que costumam vir no sistema deles
                const lat = veiculo.latitude || veiculo.lat;
                const lng = veiculo.longitude || veiculo.lng;
                const nome = veiculo.placa || veiculo.dsc_veiculo;

                if (lat && lng) {
                    if (marcadores[nome]) {
                        marcadores[nome].setLatLng([lat, lng]);
                    } else {
                        marcadores[nome] = L.marker([lat, lng])
                            .addTo(map)
                            .bindPopup(`<b>${nome}</b>`);
                    }
                }

                listaHtml.innerHTML += `
                    <div class="veiculo">
                        <span class="status-on">●</span> <b>${nome}</b>
                    </div>`;
            });

        } catch (erro) {
            console.error("Erro detalhado:", erro);
            document.getElementById('lista').innerHTML = "Erro ao conectar. Ative a extensão CORS e mantenha o site da Sigasat logado.";
        }
    }
